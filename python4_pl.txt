#!/usr/bin/perl


if(@ARGV == 0){exit 1;}
#print 'python4 script: ', $ARGV[0];
my $python4_script = $ARGV[0];

my $python3_script = $python4_script;
$python3_script =~ s/(.*)\.py/$1.py.py/ or exit 2;

open my $FH, "<$python4_script" or die $!;
open my $FH2, ">$python3_script" or die $!;
while(<$FH>){
  my $line = $_;
  $line =~ s/^[{}]$//;
  printf $FH2 "%s", $line;
}

close $FH;
close $FH2; 
my @args = (@ARGV);
shift @args;
for(@args){s#'#'\\''#g;s/^/'/;s/$/'/;}
my $args = join ' ', @args;
@args = ();
system("python3 $python3_script $args");
